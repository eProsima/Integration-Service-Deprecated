<?xml version="1.0"?>
<is>
    <topic_types>
        <type name="HelloWorld">
            <library>C:\git\integration-services\examples\dynamic_types\build\Debug\keyhelloworld_dyn_dyn_lib.dll</library>
        </type>
    </topic_types>

    <types>
        <!--
        struct sample{
            octet index;
            @Key octet key_value;
        };
        -->
        <type>
            <struct name="sample">
                <octet name="index"/>
                <octet name="key_value" key="true"/>
            </struct>
        </type>
    </types>

    <profiles>
        <participant profile_name="HelloWorldParticipant">
            <rtps>
                <builtin>
                    <domainId>0</domainId>
                </builtin>
            </rtps>

            <subscriber profile_name="subHW">
                <topic>
                    <name>HelloWorldTopic</name>
                    <dataType>HelloWorld</dataType>
                </topic>
                <historyMemoryPolicy>DYNAMIC</historyMemoryPolicy>
            </subscriber>

            <publisher profile_name="pubHW">
                <topic>
                    <name>HelloWorldTopic</name>
                    <dataType>HelloWorld</dataType>
                </topic>
                <historyMemoryPolicy>DYNAMIC</historyMemoryPolicy>
            </publisher>
        </participant>

        <participant profile_name="KeysParticipant">
            <rtps>
                <builtin>
                    <domainId>0</domainId>
                </builtin>
            </rtps>

            <subscriber profile_name="subK">
                <topic>
                    <name>samplePubSubTopic</name>
                    <dataType>sample</dataType>
                    <kind>WITH_KEY</kind>
                </topic>
                <historyMemoryPolicy>DYNAMIC</historyMemoryPolicy>
            </subscriber>

            <publisher profile_name="pubK">
                <topic>
                    <name>samplePubSubTopic</name>
                    <dataType>sample</dataType>
                    <kind>WITH_KEY</kind>
                </topic>
                <historyMemoryPolicy>DYNAMIC</historyMemoryPolicy>
            </publisher>
        </participant>
    </profiles>

    <connector name="HW_to_Key">
        <subscriber participant_name="HelloWorldParticipant" subscriber_name="subHW"/>
        <publisher participant_name="KeysParticipant" publisher_name="pubK"/>
        <transformation file="C:\git\integration-services\examples\dynamic_types\build\Debug\keyhelloworld_dyn_dyn_lib.dll" function="HelloWorldToKey"/>
    </connector>

    <connector name="Key_to_HW">
        <subscriber participant_name="KeysParticipant" subscriber_name="subK"/>
        <publisher participant_name="HelloWorldParticipant" publisher_name="pubHW"/>
    <transformation file="C:\git\integration-services\examples\dynamic_types\build\Debug\keyhelloworld_dyn_dyn_lib.dll" function="KeyToHelloWorld"/>
    </connector>
</is>
